{"ast":null,"code":"import _toConsumableArray from\"/Users/iris/Desktop/Documentos/NUEVO-TRABAJO/Pokedex/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/iris/Desktop/Documentos/NUEVO-TRABAJO/Pokedex/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/iris/Desktop/Documentos/NUEVO-TRABAJO/Pokedex/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/iris/Desktop/Documentos/NUEVO-TRABAJO/Pokedex/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import\"../styles/App.scss\";import Navbar from\"../components/Navbar\";import Searchbar from\"./Searchbar\";import Pokedex from\"../components/Pokedex\";import{getPokemons,getPokemonData,searchPokemon}from\"./Api\";import{FavoriteProvider}from\"../contexts/favoritesContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useState=React.useState,useEffect=React.useEffect;var localStorageKey=\"favorite_pokemon\";export default function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),pokemons=_useState2[0],setPokemons=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),total=_useState6[0],setTotal=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),favorites=_useState10[0],setFavorites=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),notFound=_useState12[0],setNotFound=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),searching=_useState14[0],setSearching=_useState14[1];var fetchPokemons=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data,promises,results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);_context2.next=4;return getPokemons(50,page*50);case 4:data=_context2.sent;promises=data.results.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(pokemon){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPokemonData(pokemon.url);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());_context2.next=8;return Promise.all(promises);case 8:results=_context2.sent;setPokemons(results);setLoading(false);setTotal(Math.ceil(data.count/25));_context2.next=16;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,14]]);}));return function fetchPokemons(){return _ref.apply(this,arguments);};}();var loadFavoritePokemons=function loadFavoritePokemons(){var pokemons=JSON.parse(window.localStorage.getItem(localStorageKey))||[];setFavorites(pokemons);};useEffect(function(){loadFavoritePokemons();},[]);useEffect(function(){if(!searching){fetchPokemons();}},[page]);var updateFavoritePokemons=function updateFavoritePokemons(name){var updated=_toConsumableArray(favorites);var isFavorite=updated.indexOf(name);if(isFavorite>=0){updated.splice(isFavorite,1);}else{updated.push(name);}setFavorites(updated);window.localStorage.setItem(localStorageKey,JSON.stringify(updated));};var onSearch=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(pokemon){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(pokemon){_context3.next=2;break;}return _context3.abrupt(\"return\",fetchPokemons());case 2:setLoading(true);setNotFound(false);setSearching(true);_context3.next=7;return searchPokemon(pokemon);case 7:result=_context3.sent;if(result){_context3.next=14;break;}setNotFound(true);setLoading(false);return _context3.abrupt(\"return\");case 14:setPokemons([result]);setPage(0);setTotal(1);case 17:setLoading(false);setSearching(false);case 19:case\"end\":return _context3.stop();}}},_callee3);}));return function onSearch(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(FavoriteProvider,{value:{favoritePokemons:favorites,updateFavoritePokemons:updateFavoritePokemons},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Searchbar,{onSearch:onSearch}),notFound?/*#__PURE__*/_jsx(\"div\",{className:\"not-found-text\",children:\"No se encontro el Pokemon que buscabas \\uD83D\\uDE2D\"}):/*#__PURE__*/_jsx(Pokedex,{loading:loading,pokemons:pokemons,page:page,setPage:setPage,total:total})]})]})});}","map":{"version":3,"sources":["/Users/iris/Desktop/Documentos/NUEVO-TRABAJO/Pokedex/src/components/App.js"],"names":["React","Navbar","Searchbar","Pokedex","getPokemons","getPokemonData","searchPokemon","FavoriteProvider","useState","useEffect","localStorageKey","App","pokemons","setPokemons","page","setPage","total","setTotal","loading","setLoading","favorites","setFavorites","notFound","setNotFound","searching","setSearching","fetchPokemons","data","promises","results","map","pokemon","url","Promise","all","Math","ceil","count","loadFavoritePokemons","JSON","parse","window","localStorage","getItem","updateFavoritePokemons","name","updated","isFavorite","indexOf","splice","push","setItem","stringify","onSearch","result","favoritePokemons"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../styles/App.scss\";\nimport Navbar from \"../components/Navbar\";\nimport Searchbar from \"./Searchbar\";\nimport Pokedex from \"../components/Pokedex\";\nimport { getPokemons, getPokemonData, searchPokemon } from \"./Api\";\nimport { FavoriteProvider } from \"../contexts/favoritesContext\";\n\nconst { useState, useEffect } = React;\n\nconst localStorageKey = \"favorite_pokemon\";\n\nexport default function App() {\n  const [pokemons, setPokemons] = useState([]);\n  const [page, setPage] = useState(0);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [favorites, setFavorites] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [searching, setSearching] = useState(false);\n\n  const fetchPokemons = async () => {\n    try {\n      setLoading(true);\n      const data = await getPokemons(50, page*50);\n      const promises = data.results.map(async (pokemon) => {\n        return await getPokemonData(pokemon.url);\n      });\n      const results = await Promise.all(promises);\n      setPokemons(results);\n      setLoading(false);\n      setTotal(Math.ceil(data.count / 25));\n    } catch (err) {}\n  };\n\n  const loadFavoritePokemons = () => {\n    const pokemons =\n      JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n    setFavorites(pokemons);\n  };\n\n  useEffect(() => {\n    loadFavoritePokemons();\n  }, []);\n\n  useEffect(() => {\n    if (!searching) {\n      fetchPokemons();\n    }\n  }, [page]);\n\n  const updateFavoritePokemons = (name) => {\n    const updated = [...favorites];\n    const isFavorite = updated.indexOf(name);\n    if (isFavorite >= 0) {\n      updated.splice(isFavorite, 1);\n    } else {\n      updated.push(name);\n    }\n    setFavorites(updated);\n    window.localStorage.setItem(localStorageKey, JSON.stringify(updated));\n  };\n\n  const onSearch = async (pokemon) => {\n    if (!pokemon) {\n      return fetchPokemons();\n    }\n    setLoading(true);\n    setNotFound(false);\n    setSearching(true);\n    const result = await searchPokemon(pokemon);\n    if (!result) {\n      setNotFound(true);\n      setLoading(false);\n      return;\n    } else {\n      setPokemons([result]);\n      setPage(0);\n      setTotal(1);\n    }\n    setLoading(false);\n    setSearching(false);\n  };\n\n  return (\n    <FavoriteProvider\n      value={{\n        favoritePokemons: favorites,\n        updateFavoritePokemons: updateFavoritePokemons,\n      }}\n    >\n      <div>\n        <Navbar />\n        <div className=\"App\">\n          <Searchbar onSearch={onSearch} />\n          {notFound ? (\n            <div className=\"not-found-text\">\n              No se encontro el Pokemon que buscabas 😭\n            </div>\n          ) : (\n            <Pokedex\n              loading={loading}\n              pokemons={pokemons}\n              page={page}\n              setPage={setPage}\n              total={total}\n            />\n          )}\n        </div>\n      </div>\n    </FavoriteProvider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}